<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>弹力球</title>
	<style type="text/css">
		
	</style>
</head>
<body style="height: 1000px">
	<input id="btnGo" type="button" value="动起来" />

</body>
</html>
<script type="text/javascript">



//弹力球(ES3)：
function Ball(width,height,opacity,color,left,top1,leftDirection,topDirection,leftStep,topStep,timeSpace){
	//属性：
	this.ballDom = null;
	this.width = width;
	this.height = height;
	this.opacity=opacity;
	this.color = color;
	this.left = left;
	this.top = top1;
	this.leftDirection = leftDirection;
	this.topDirection = topDirection;
	this.leftStep = leftStep;
	this.topStep = topStep;
	this.timeSpace = timeSpace;
	this.createUI();
	this.go();	
}

//方法
//动态创建dom
Ball.prototype.createUI = function(){
	this.ballDom = document.createElement("div");
	this.ballDom.style.cssText=`position: absolute;
			left:${this.left}px;
			top:${this.top}px;
			height: ${this.height}px;
			width: ${this.width}px;
			opacity:${this.opacity};
			background-color: ${this.color};
			border-radius: 50%;`;
	document.body.appendChild(this.ballDom);
}

Ball.prototype.go = function(){

	// console.log(this);

	setInterval(()=>{
		//一、处理数据
		//1、改变数据
		this.left = this.left+this.leftDirection*this.leftStep;
		this.top = this.top+this.topDirection*this.topStep;

		//2、边界处理
		let clientWidth = document.documentElement.clientWidth || document.body.clientWidth;
		let clientHeight = document.documentElement.clientHeight || document.body.clientHeight;

		let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
		let scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft;

		if(this.left<=scrollLeft){
			this.left = scrollLeft
			this.leftDirection = 1;
		}else if(this.left>= clientWidth-this.width + scrollLeft){	this.left = clientWidth-this.width + scrollLeft
			this.leftDirection = -1;
		}

		if(this.top<=0+scrollTop){
			this.top = 0+scrollTop;
			this.topDirection = 1;
		}else if(this.top>=clientHeight-this.height+scrollTop){
			this.top = clientHeight-this.height+scrollTop;
			this.topDirection = -1;
		}


		//二、改变外观
		this.ballDom.style.left = this.left+"px";
		this.ballDom.style.top = this.top+"px";

	},this.timeSpace);
}


window.onload = function () {
	$("#btnGo").onclick = function(){
		for(let i=0;i<50;i++){
			let size = parseInt(Math.random()*90)+10;
			let opacity=Math.random()*2;
			let color = getColor();
			let left1 = parseInt(Math.random()*990)+10;
			let top1 = parseInt(Math.random()*600)+10;
			let leftDirection = parseInt(Math.random()*2)==0?-1:1;
			let topDirection = parseInt(Math.random()*2)==0?-1:1;
			let step = parseInt(Math.random()*10)+2;
			let timeSpace = parseInt(Math.random()*90)+10;

			new Ball(size,size,opacity,color,left1,top1,leftDirection,topDirection,step,step,timeSpace);	
		}

	}
}

function getColor(){
	var str="#";
	for(var i=0;i<6;i++){
		str+=(parseInt(Math.random()*16)).toString(16);
	}
	return str;
}

function $(str) {
	if(str.charAt(0)=='#'){
		return document.getElementById(str.substring(1));
	}else if(str.charAt(0)=='.'){
		return document.getElementsByClassName(str.substring(1));
	}else{
		return document.getElementsByTagName(str);
	}
}

</script>